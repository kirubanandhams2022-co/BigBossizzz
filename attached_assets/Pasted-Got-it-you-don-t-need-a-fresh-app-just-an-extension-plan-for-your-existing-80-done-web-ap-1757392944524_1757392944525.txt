Got it ðŸ‘ â€” you donâ€™t need a fresh app, just an **extension plan** for your existing 80%-done web app.
That means Iâ€™ll map each feature we discussed to **incremental changes** you can make on top of whatâ€™s already there (backend + frontend + DB).

Hereâ€™s how to integrate instead of rebuilding:

---

## ðŸ”§ Modification Plan for Your Existing App

### 1. **Database Changes**

* Add the new tables (`proctor_event`, `device_log`, `upload_record`) into your existing schema.
* Extend `submission` table with `status`, `report_sent`, `score`.
* Extend `quiz` with `allow_view_responses`, `auto_generate_from_upload`.

âž¡ï¸ You donâ€™t need a fresh DB, just use **`ALTER TABLE` + `CREATE TABLE`** migrations.

---

### 2. **Quiz Auto-Generation from File**

* Add **file upload endpoint** (`/api/upload-quiz-file`).
* Parse CSV/Excel â†’ insert into `question` & `option_item`.
* Mark quiz as `draft` â†’ let host review & publish in existing quiz dashboard.
* Reuse your quiz creation page: add a tab **â€œImport from fileâ€**.

---

### 3. **Host Portal Enhancements**

* Add a **Monitoring Panel**:

  * Show list of logged-in participants with device info (`device_log`).
  * Stream proctoring events (via **WebSocket**).
* Add a **Download Reports** button â†’ generate XLSX/PDF on demand or when all submissions complete.
* Add **â€œContact Adminâ€** button with admin details pulled from DB.

---

### 4. **Participant Portal Enhancements**

* Add **proctoring module**:

  * Detect **tab switch** (`document.visibilitychange`).
  * **Camera check**: use face-api.js (in-browser) for face count.
  * On suspicious event: show warning; if repeated, mark submission `terminated` & notify host/admin.
* Add **â€œView Your Responsesâ€** page after submit â†’ fetch submission with per-question correctness.
* Add **Download Your Report** button.
* Ensure submission auto-emails result (via worker/job queue).

---

### 5. **Admin Portal Enhancements**

* Add **Host/Participant management view**.
* Add **Export DB** option: download SQLite or SQL dump file.
* Display **support details** (contact info) so portals can show â€œContact Adminâ€.

---

### 6. **Proctoring Integration**

* Add small **JS module** to inject into quiz-taking page:

  * Tab focus detection â†’ send event to server.
  * Camera â†’ face count â†’ if >1 face, trigger event.
* Send these events to backend (`/api/proctor/event`) and broadcast to host/admin dashboards via WebSocket.

---

### 7. **Reports & Emails**

* On **quiz submit** â†’ queue background job:

  * Grade submission.
  * Generate participant result PDF/CSV.
  * Email it to registered email.
* On **host report request** â†’ generate combined report + auto-email host.

---

## âœ… What You Donâ€™t Need to Change

* Login/Auth system â†’ extend with roles if not already present.
* Existing quiz/answer flow â†’ just add `auto_generate`, `view responses`, `report export`.

---

ðŸ‘‰ This way, you **keep your existing app** and only add:

* a few DB tables,
* endpoints,
* small proctoring JS,
* export/email workers,
* minor UI extensions.

---

Kiru, do you want me to **write the SQL `ALTER TABLE` + `CREATE TABLE` migration scripts** so you can directly patch your current DB? That way you wonâ€™t touch the working part of your app, just extend it.
